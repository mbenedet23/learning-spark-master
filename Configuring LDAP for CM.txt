
Configurations made:
-------------------------------

Authentication Backend Order
External then Database

Authorization Backend Order
Database and External

External Authentication Type
LDAP

LDAP URL
ldaps://jnj.com:3269

LDAP Bind User Distinguished Name
sa-its-dev-edl-ad@NA.JNJ.COM

LDAP Bind Password
******

Active Directory Domain
JNJ.COM

LDAP User Groups
ITS-EDL-DEV-CM-READ-ONLY-USR,ITS-EDL-DEV-CM-FULL-ADMIN-USR,ITS-EDL-DEV-CM-USR-ADMIN-USR,ITS-EDL-DEV-CM-CLSTR-ADMIN-USR,ITS-EDL-DEV-CM-BDR-ADMIN-USR,ITS-EDL-DEV-CM-CONFIGURATOR-USR,ITS-EDL-DEV-CM-NAVIGATOR-ADMIN-USR,ITS-EDL-DEV-CM-OPERATOR-USR,ITS-EDL-DEV-CM-LMTD-OPERATOR-USR,ITS-EDL-DEV-CM-AUDITOR-USR

LDAP User Search Filter
(samAccountName={0})

LDAP User Search Base
dc=JNJ,dc=COM

LDAP Group Search Filter
(member={0})

LDAP Group Search Base
OU=Groups,DC=jnj,DC=com

SAML Keystore Password
Alias of SAML Sign/Encrypt Private Key

SAML Sign/Encrypt Private Key Password
SAML Entity ID
clouderaManager

SAML Entity Alias
clouderaManager

SAML Entity Base URL
Value not set

SAML Response Binding
HTTP-Artifact

SAML Login URL
Value not set

Source of User ID in SAML Response
Attribute

SAML Attribute Identifier for User ID
urn:oid:0.9.2342.19200300.100.1.1

SAML Role Assignment Mechanism
Attribute

SAML Attribute Identifier for User Role
urn:oid:2.5.4.11

Path to SAML Role Assignment Script
Value not set

-------------------


Hello Abdul,

Thank you for your time on the webex. 
Please find the summary of today's meeting below: 

ATTENDEES: 
Johnson & Johnson: Abdul

Cloudera: Mark

WORK PERFORMED: 
 - After changing the ldap url from ldap://jnj.com:3268 to ldap://jnj.com:3269 users are no longer able to login. Admin user login is also not working.
 - The "Authorization Backend Order" was set to only LDAP and so the admin user could not login.
 - To allow admin access again we updated the config in the mysql db directory.

 >select ATTR, VALUE from CONFIGS where ATTR = "auth_backend_order"; 
 >delete from CONFIGS where ATTR = "auth_backend_order" and SERVICE_ID is null;  

and restarted CM server.

 - After this the 'admin' user could get into to CM.
 - To resolve the ldaps issues we copied the 'jssecacerts' file from a working cluster to $JAVA_HOME/jre/lib/security (on the CM host) and restarted.
(cp /usr/java/latest/jre/lib/security/cacerts /usr/java/latest/jre/lib/security/jssecacerts)
 - After updating the ldap_url and restarting we confirmed that your user could now login.

REMAINING ISSUES:
 - You cannot assign Roles to users via AD as CM is missing the options (fields) to assign roles in CM 6.2. Indeed I see the same thing on my lab cluster here.

NEXT STEPS: 
Johnson & Johnson: Adbul
 - No actions required on your side at this time.

Cloudera:  Mark
 - I need to investigate why we cannot assign Roles to users in CM with 6.2
 - I'll be researching this and will update you later with my findings.

